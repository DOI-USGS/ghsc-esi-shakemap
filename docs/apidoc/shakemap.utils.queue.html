
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>shakemap.utils.queue &#8212; ShakeMap Documentation  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="shortcut icon" href="../_static/northridge_points.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="shakemap.utils.utils" href="shakemap.utils.utils.html" />
    <link rel="prev" title="shakemap.utils.probs" href="shakemap.utils.probs.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-shakemap.utils.queue">
<span id="shakemap-utils-queue"></span><h1>shakemap.utils.queue<a class="headerlink" href="#module-shakemap.utils.queue" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="shakemap.utils.queue.send_queue">
<span class="sig-prename descclassname"><span class="pre">shakemap.utils.queue.</span></span><span class="sig-name descname"><span class="pre">send_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9755</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#send_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.send_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a command and its data to the queue process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – A valid command for the queue (e.g., ‘origin’).</p></li>
<li><p><strong>data</strong> (<em>JSON serializable</em>) – The data associated with the command.
Could be int, float, string, dictionary, list, etc. Must be
JSON serializable. Must be less than MAX_SIZE bytes when
serialized.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Nothing</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>nothing</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="http://docs.python.org/3.5/library/exceptions.html#RuntimeError" title="(in Python v3.6)"><strong>RuntimeError</strong></a> – If the serialized data is larger than MAX_SIZE.</p></li>
<li><p><a class="reference external" href="http://docs.python.org/3.5/library/exceptions.html#OSError" title="(in Python v3.6)"><strong>OSError</strong></a> – If there is a problem with the socket or connection.</p></li>
<li><p><a class="reference external" href="http://docs.python.org/3.5/library/exceptions.html#TypeError" title="(in Python v3.6)"><strong>TypeError</strong></a> – If the supplied data is not JSON serializable.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="shakemap.utils.queue.str_to_seconds">
<span class="sig-prename descclassname"><span class="pre">shakemap.utils.queue.</span></span><span class="sig-name descname"><span class="pre">str_to_seconds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tstring</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#str_to_seconds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.str_to_seconds" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert time strings to seconds. Strings can be of the
form:</p>
<blockquote>
<div><p>&lt;int&gt;   (ninutes)
&lt;int&gt;m  (minutes)
&lt;int&gt;h  (hours)
&lt;int&gt;d  (days)
&lt;int&gt;y  (years)</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tstring</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – An integer followed by an (optional)
‘m’, ‘h’, ‘d’, ‘y’.</p>
</dd>
</dl>
<dl class="simple">
<dt>Returns</dt><dd><p>int: The number of seconds represented by the input string. If
the string is unadorned and represents a negative number, -1
is returned.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="http://docs.python.org/3.5/library/exceptions.html#ValueError" title="(in Python v3.6)"><strong>ValueError</strong></a> – If the value cannot be converted to seconds.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="shakemap.utils.queue.parse_config">
<span class="sig-prename descclassname"><span class="pre">shakemap.utils.queue.</span></span><span class="sig-name descname"><span class="pre">parse_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#parse_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.parse_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the config object to get usable data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<em>ConfigObj object</em>) – The result of parsing the file’s
configuration file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A cleaned up version of the input.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.6)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="shakemap.utils.queue.get_config">
<span class="sig-prename descclassname"><span class="pre">shakemap.utils.queue.</span></span><span class="sig-name descname"><span class="pre">get_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">install_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#get_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.get_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the config and get it into a usable state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>install_path</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The install path of the current profile.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary of configuration data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.6)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shakemap.utils.queue.</span></span><span class="sig-name descname"><span class="pre">Queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.queueMainLoop">
<span class="sig-name descname"><span class="pre">queueMainLoop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.queueMainLoop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.queueMainLoop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.doPeriodicTasks">
<span class="sig-name descname"><span class="pre">doPeriodicTasks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.doPeriodicTasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.doPeriodicTasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for finished children and start any needed timed repeats.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.getLogger">
<span class="sig-name descname"><span class="pre">getLogger</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.getLogger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.getLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up a logger for this process.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An instance of a logger.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>logging.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.associateAll">
<span class="sig-name descname"><span class="pre">associateAll</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.associateAll"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.associateAll" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the associateAll method of the the AmplitudeHandler and
then process all of the events with updated data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.writeEventXml">
<span class="sig-name descname"><span class="pre">writeEventXml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.writeEventXml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.writeEventXml" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the event directory if it doesn’t exist and write/re-write
the event.xml file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a>) – The event data structure.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Nothing.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.moveEventDirectory">
<span class="sig-name descname"><span class="pre">moveEventDirectory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oldid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.moveEventDirectory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.moveEventDirectory" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the name of an existing event directory to a new ID.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.processOrigin">
<span class="sig-name descname"><span class="pre">processOrigin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.processOrigin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.processOrigin" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if an event should be processed (or reprocessed) and
dispatch it for processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a>) – The event data structure.</p></li>
<li><p><strong>action</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The “type” of the trigger that caused this function
to be called.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Nothing.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.processOther">
<span class="sig-name descname"><span class="pre">processOther</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.processOther"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.processOther" title="Permalink to this definition">¶</a></dt>
<dd><p>A trigger has been issued for an event. Treat this as
an origin update. If the event in question is not in our
database, ignore the message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a>) – The event information dictionary.</p></li>
<li><p><strong>action</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The “type” of the trigger that caused this function
to be called.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Nothing.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.processCancel">
<span class="sig-name descname"><span class="pre">processCancel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.processCancel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.processCancel" title="Permalink to this definition">¶</a></dt>
<dd><p>We’ve received a cancellation of an event: run ‘shake cancel’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a>) – The dictionary must have an event ID
under the ‘id’ key.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Nothing.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.magnitudeTooSmall">
<span class="sig-name descname"><span class="pre">magnitudeTooSmall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.magnitudeTooSmall"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.magnitudeTooSmall" title="Permalink to this definition">¶</a></dt>
<dd><p>Return False if the magnitude is greater than the threshold
magnitude of the first metro box within which it falls, or
the global minmag if it does not fall within a box; return
true otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a>) – The event dictionary; must contain at least “mag”,
“lon”, and “lat” keys.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the event is too small to process; False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="http://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.6)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.eventTooOldOrInFuture">
<span class="sig-name descname"><span class="pre">eventTooOldOrInFuture</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.eventTooOldOrInFuture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.eventTooOldOrInFuture" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the event is too old or too far in the future to
process; return False otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a>) – The event data structure.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the event is older than old_event_age or is
more than future_event_age in the future; returns False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="http://docs.python.org/3.5/library/functions.html#bool" title="(in Python v3.6)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.dispatchEvent">
<span class="sig-name descname"><span class="pre">dispatchEvent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.dispatchEvent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.dispatchEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Queue a run for the specified event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a>) – The data structure of the event to process.</p></li>
<li><p><strong>action</strong> (<a class="reference external" href="http://docs.python.org/3.5/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – ‘cancel’, ‘test’, or some other string. ‘cancel’
starts the cancel process, ‘test’ queues the process
‘echo eventid’. Any other string queues the
shake process to be run at the next opportunity.
See the configuration file ‘queue.conf’ for the
exact commands that will be run.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Nothing.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.runQueuedEvents">
<span class="sig-name descname"><span class="pre">runQueuedEvents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.runQueuedEvents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.runQueuedEvents" title="Permalink to this definition">¶</a></dt>
<dd><p>If there is space, run events from the queue</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.reapChildren">
<span class="sig-name descname"><span class="pre">reapChildren</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.reapChildren"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.reapChildren" title="Permalink to this definition">¶</a></dt>
<dd><p>Look through the list of child processes, reap the ones that have
finished, and kill any that are taking too long.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing. Completed or killed child processes are removed
from the list of children.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.Queue.getContext">
<span class="sig-name descname"><span class="pre">getContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Queue.getContext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Queue.getContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a context based on the value of the ‘attached’ argument.
If attached is True, then the function returns an instance of the
Dummycontext; if it is False the function returns the ‘context’
argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> (<em>Context manager</em>) – A valid context manager.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>If attached is True, the function returns an</dt><dd><p>instance of the Dummycontext; if False, returns
the ‘context’ argument.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Context manager</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="shakemap.utils.queue.Dummycontext">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shakemap.utils.queue.</span></span><span class="sig-name descname"><span class="pre">Dummycontext</span></span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#Dummycontext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.Dummycontext" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This is a dummy context that can be used as a context manager
with ‘with’. It doesn’t do anything.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="shakemap.utils.queue.EventQueue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shakemap.utils.queue.</span></span><span class="sig-name descname"><span class="pre">EventQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipath</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#EventQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.EventQueue" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class to maintain some persistence in the event of a program
crash or shutdown. The db file can be removed if the operator wants
a fresh start.</p>
<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.EventQueue.commit">
<span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#EventQueue.commit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.EventQueue.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit any operations to the database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.EventQueue.getQueuedEvents">
<span class="sig-name descname"><span class="pre">getQueuedEvents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#EventQueue.getQueuedEvents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.EventQueue.getQueuedEvents" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.EventQueue.queueEvent">
<span class="sig-name descname"><span class="pre">queueEvent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eventid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#EventQueue.queueEvent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.EventQueue.queueEvent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.EventQueue.dequeueEvent">
<span class="sig-name descname"><span class="pre">dequeueEvent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eventid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#EventQueue.dequeueEvent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.EventQueue.dequeueEvent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.EventQueue.getRunningEvents">
<span class="sig-name descname"><span class="pre">getRunningEvents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#EventQueue.getRunningEvents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.EventQueue.getRunningEvents" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.EventQueue.insertRunningEvent">
<span class="sig-name descname"><span class="pre">insertRunningEvent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eventid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#EventQueue.insertRunningEvent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.EventQueue.insertRunningEvent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shakemap.utils.queue.EventQueue.deleteRunningEvent">
<span class="sig-name descname"><span class="pre">deleteRunningEvent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eventid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shakemap/utils/queue.html#EventQueue.deleteRunningEvent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#shakemap.utils.queue.EventQueue.deleteRunningEvent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/northridge_thumbnail_light_16x9.png" alt="Logo"/>
    
    <h1 class="logo logo-name">ShakeMap Documentation</h1>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../manual4_0/index.html">ShakeMap 4.1 Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programs/programs.html">ShakeMap 4.1 Command Line Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="shakemap.html">ShakeMap 4.1 API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="shakemap.coremods.html">shakemap.coremods</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="shakemap.utils.html">shakemap.utils</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="shakemap.utils.amps.html">shakemap.utils.amps</a></li>
<li class="toctree-l3"><a class="reference internal" href="shakemap.utils.config.html">shakemap.utils.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="shakemap.utils.dataframe.html">shakemap.utils.dataframe</a></li>
<li class="toctree-l3"><a class="reference internal" href="shakemap.utils.dependencies.html">shakemap.utils.dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="shakemap.utils.exception.html">shakemap.utils.exception</a></li>
<li class="toctree-l3"><a class="reference internal" href="shakemap.utils.generic_amp.html">shakemap.utils.generic_amp</a></li>
<li class="toctree-l3"><a class="reference internal" href="shakemap.utils.layers.html">shakemap.utils.layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="shakemap.utils.logging.html">shakemap.utils.logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="shakemap.utils.macros.html">shakemap.utils.macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="shakemap.utils.probs.html">shakemap.utils.probs</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">shakemap.utils.queue</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#shakemap.utils.queue.send_queue"><code class="docutils literal notranslate"><span class="pre">send_queue()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#shakemap.utils.queue.str_to_seconds"><code class="docutils literal notranslate"><span class="pre">str_to_seconds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#shakemap.utils.queue.parse_config"><code class="docutils literal notranslate"><span class="pre">parse_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#shakemap.utils.queue.get_config"><code class="docutils literal notranslate"><span class="pre">get_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#shakemap.utils.queue.Queue"><code class="docutils literal notranslate"><span class="pre">Queue</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.queueMainLoop"><code class="docutils literal notranslate"><span class="pre">Queue.queueMainLoop()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.doPeriodicTasks"><code class="docutils literal notranslate"><span class="pre">Queue.doPeriodicTasks()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.getLogger"><code class="docutils literal notranslate"><span class="pre">Queue.getLogger()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.associateAll"><code class="docutils literal notranslate"><span class="pre">Queue.associateAll()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.writeEventXml"><code class="docutils literal notranslate"><span class="pre">Queue.writeEventXml()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.moveEventDirectory"><code class="docutils literal notranslate"><span class="pre">Queue.moveEventDirectory()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.processOrigin"><code class="docutils literal notranslate"><span class="pre">Queue.processOrigin()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.processOther"><code class="docutils literal notranslate"><span class="pre">Queue.processOther()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.processCancel"><code class="docutils literal notranslate"><span class="pre">Queue.processCancel()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.magnitudeTooSmall"><code class="docutils literal notranslate"><span class="pre">Queue.magnitudeTooSmall()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.eventTooOldOrInFuture"><code class="docutils literal notranslate"><span class="pre">Queue.eventTooOldOrInFuture()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.dispatchEvent"><code class="docutils literal notranslate"><span class="pre">Queue.dispatchEvent()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.runQueuedEvents"><code class="docutils literal notranslate"><span class="pre">Queue.runQueuedEvents()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.reapChildren"><code class="docutils literal notranslate"><span class="pre">Queue.reapChildren()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.Queue.getContext"><code class="docutils literal notranslate"><span class="pre">Queue.getContext()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#shakemap.utils.queue.Dummycontext"><code class="docutils literal notranslate"><span class="pre">Dummycontext</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#shakemap.utils.queue.EventQueue"><code class="docutils literal notranslate"><span class="pre">EventQueue</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.EventQueue.commit"><code class="docutils literal notranslate"><span class="pre">EventQueue.commit()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.EventQueue.getQueuedEvents"><code class="docutils literal notranslate"><span class="pre">EventQueue.getQueuedEvents()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.EventQueue.queueEvent"><code class="docutils literal notranslate"><span class="pre">EventQueue.queueEvent()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.EventQueue.dequeueEvent"><code class="docutils literal notranslate"><span class="pre">EventQueue.dequeueEvent()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.EventQueue.getRunningEvents"><code class="docutils literal notranslate"><span class="pre">EventQueue.getRunningEvents()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.EventQueue.insertRunningEvent"><code class="docutils literal notranslate"><span class="pre">EventQueue.insertRunningEvent()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#shakemap.utils.queue.EventQueue.deleteRunningEvent"><code class="docutils literal notranslate"><span class="pre">EventQueue.deleteRunningEvent()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="shakemap.utils.utils.html">shakemap.utils.utils</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../manual3_5/index.html">ShakeMap 3.5 Manual (Deprecated)</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
    </div>

    

    
  </body>
</html>